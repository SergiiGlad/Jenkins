#!groovy

library identifier: 'my-shared-library@master', retriever: modernSCM(github(repository: 'Jenkins', repoOwner: 'SergiiGlad'))

def podLabel = "worker-${UUID.randomUUID()}"

golangTemplate(podLabel) {
  node(podLabel){
    container('docker-dind') {
      withDockerRegistry([credentialsId: 'docker-api-key', url: 'https://index.docker.io/v1/']) {
				sh 'ls -al /home/jenkins/agent/workspace/'
        sh "find / -name config.json -exec cp '{}' ~ +" 	
        sh 'cat ~/config.json'
			  
      }
    }
   

  }
}



def getAllGitTags(){
  git url: 'https://github.com/sergiiglad/web.git'
  def getall = sh(returnStdout: true, script: 'git tag')
  return getall.readLines().unique()
}
