#!groovy

library 'my-shared-library'

def sun = @library('my-shared-library').com.sun.SunDeploy

node{

  git credentialsId: 'github_git',
    url: 'https://github.com/sergiiglad/web-delivery.git'

  def yamlFilePathList = fileList('.')

  if ( yamlFilePathList ) println yamlFilePathList

  List stages = [] 

  yamlFilePathList.each {
      stages.add( sun.new( it ) )
  }

  stages.each() {
    it.print()
  }

}