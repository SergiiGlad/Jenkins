#!groovy

library identifier: 'my-shared-library@master', retriever: modernSCM(github(repository: 'Jenkins', repoOwner: 'SergiiGlad'))

def gettags

node{

  stage('Clone sources') {
        git url: 'https://github.com/sergiiglad/web.git'
        def getall = sh(returnStdout: true, script: 'git ls-remote -t -h')

        println getall

        gettags = getall.readLines()
                 .collect { it.split()[1].replaceAll('refs/heads/', '')  }
                 .unique()

    }

      println gettags
}
