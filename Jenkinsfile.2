#!groovy

library identifier: 'my-shared-library@master', retriever: modernSCM(github(repository: 'Jenkins', repoOwner: 'SergiiGlad'))

def gettags

node{

      def allGitTags=getAllGitTags()

      if ( '4.0.0 in allGitTags') println '4.0.0'

      getRemote()
}


def getAllGitTags(){
  git url: 'https://github.com/sergiiglad/web.git'
  def getall = sh(returnStdout: true, script: 'git tag')
  return getall.readLines().unique()
}

def getRemote() {
  def gettag
  sshagent(credentials: ['github-ssh']) {
    gettags = ("git ls-remote -t -h ssh://git@github.com/sergiiglad/web.git").execute()
  }
  println gettags
}
